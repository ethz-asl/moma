<?xml version="1.0" ?>
<launch>
  <arg name="rviz"              default="false"/> <!-- run rviz debug visualization -->
  <arg name="launch_realsense"  default="false"/> <!-- launch also realsense from here -->
  <arg name="debug_apriltag"    default="false"/> <!-- run tracker to debug calibration -->
  <arg name="debug_pcl"         default="false"/> <!-- show point cloud to debug calibration -->
  <arg name="calibration_file"  default="$(find moma_sensor_tools)/config/handeye_calibration.yaml"/>

  <!-- Read calibration from file and publish tf -->
	<include file="$(find easy_handeye)/launch/publish.launch">
      <arg name="calibration_file"  value="$(arg calibration_file)"/>
      <arg name="eye_on_hand"       value="true"/>
	</include>

  <!-- Optionally launch the realsense from this launch script -->
  <include file="$(find realsense2_camera)/launch/rs_camera.launch" if="$(arg launch_realsense)">
    <arg name="camera"                value="$(arg camera_name)"/>
    <arg name="enable_depth"          value="$(arg debug_pcl)"/>
    <arg name="enable_pointcloud"     value="$(arg debug_pcl)"/>
    <arg name="enable_sync"           value="true"/>
  </include>

  <!-- April tag tf published from optical center to the tag. Tag should not move in a fixed reference frame -->
  <include file="$(find moma_sensor_tools)/launch/apriltag_tracking.launch" if="$(arg debug_apriltag)">
    <arg name="launch_realsense"  value="true"/>
    <arg name="camera_name"       value="hand_eye"/>
    <arg name="image_topic"       value="color/image_raw"/>
    <arg name="rviz"              value="false"/>
  </include>

  <!-- Rviz helper visualization -->
  <node pkg="rviz" type="rviz" name="$(anon rviz)" args="-d $(find moma_sensor_tools)/config/rviz/hand_eye.rviz" if="$(arg rviz)"/>

</launch>
