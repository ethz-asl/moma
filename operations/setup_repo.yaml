---
- hosts: franka-box
  remote_user: franka
  roles:
    - gpd
  tasks:
    - name: Update package lists
      become: yes
      apt:
        update_cache: true
    - name: Install ros-franka
      become: yes
      apt:
        name: "{{ packages }}"
        state: present
      vars:
        packages:
        - ros-melodic-franka-ros
        - ros-melodic-py-trees
        - ros-melodic-py-trees-ros
        - ros-melodic-rqt-py-trees
        - ros-melodic-pcl-conversions
    - name: Create workspace src directory
      file:
        path: /home/franka/catkin_ws/src/
        state: directory
    - name: Initialize workspace
      shell: catkin init
      args:
        chdir: /home/franka/catkin_ws
    - name: Clone moma
      git:
        repo: git@github.com:ethz-asl/moma
        dest: /home/franka/catkin_ws/src/moma
        version: master
    - name: Clone gpd-ros
      git:
        repo: git@github.com:kekeblom/gpd_ros
        dest: /home/franka/catkin_ws/src/gpd_ros
        version: master

