<?xml version="1.0" encoding="utf-8"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="royalpanda">

    <!-- Do NOT add further movable joints here, as the MPC controller relies on a total of 10 movable joints,
         or if so, make them not load by default -->

    <xacro:arg name="tool" default="none" />

    <link name="world" />
    <joint name="base_prismatic_x" type="prismatic">
        <parent link="world" />
        <child link="base_x" />
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <axis xyz="1 0 0"/>
        <limit effort="0" velocity="0"/>
    </joint>
    <link name="base_x" />
    <joint name="base_prismatic_y" type="prismatic">
        <parent link="base_x" />
        <child link="base_y" />
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <axis xyz="0 1 0"/>
        <limit effort="0" velocity="0"/>
    </joint>
    <link name="base_y" />
    <joint name="base_revolute_theta" type="revolute">
        <parent link="base_y" />
        <child link="base_theta" />
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <axis xyz="0 0 1"/>
        <limit effort="0" velocity="0"/>
    </joint>
    <link name="base_theta">
        <visual>
          <origin xyz="0 0 0.1"/>
          <geometry>
            <box size="0.5 0.3 0.2"/>
          </geometry>
        </visual>
    </link>
    <joint name="base_to_panda" type="fixed">
        <parent link="base_theta" />
        <child link="arm_root" />
        <origin xyz="0 0 0.2" rpy="0 0 0"/>
    </joint>
    <link name="arm_root" />

    <xacro:include filename="$(find moma_description)/urdf/panda.xacro"/>
    <xacro:panda connected_to="arm_root" tool="$(arg tool)"/>

</robot>
